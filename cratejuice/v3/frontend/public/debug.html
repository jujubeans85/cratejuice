<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <title>CrateJuice Debug Test</title>
    <style>
        body { background: #0b0b0f; color: #f5f5f7; font-family: system-ui; padding: 20px; }
        .test { background: #12121b; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .track { background: #1a1a28; padding: 10px; margin: 5px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üéµ CrateJuice Debug Test</h1>
    <div class="test">
        <h3>Static Content Test</h3>
        <div class="track">‚úÖ This should appear if HTML/CSS is loading</div>
    </div>
    
    <div class="test">
        <h3>JavaScript Test</h3>
        <div id="jsTest">‚ùå JavaScript not loaded</div>
    </div>
    
    <div class="test">
        <h3>Data Loading Test</h3>
        <div id="dataTest">‚è≥ Testing data loading...</div>
    </div>
    
    <div class="test">
        <h3>Manual Track Test</h3>
        <div id="manualTracks"></div>
    </div>

    <script>
        // Test 1: Basic JS
        document.getElementById('jsTest').innerHTML = '‚úÖ JavaScript is working!';
        
        // Test 2: Data loading
        async function testDataLoading() {
            try {
                const libResponse = await fetch('./library.json');
                const lib = await libResponse.json();
                
                const playlistResponse = await fetch('./playlist.json');
                const playlist = await playlistResponse.json();
                
                document.getElementById('dataTest').innerHTML = 
                    `‚úÖ Data loaded!<br>Library tracks: ${Object.keys(lib.tracks || {}).length}<br>Playlist items: ${playlist.length}`;
                
                // Test 3: Manual track rendering
                const tracks = lib.tracks || {};
                const manualDiv = document.getElementById('manualTracks');
                
                if (Object.keys(tracks).length > 0) {
                    let html = '';
                    Object.keys(tracks).forEach((id, index) => {
                        const track = tracks[id];
                        html += `<div class="track">${index + 1}. ${track.title} - ${track.artist}</div>`;
                    });
                    manualDiv.innerHTML = html;
                } else {
                    manualDiv.innerHTML = '‚ùå No tracks found in library';
                }
                
            } catch (error) {
                document.getElementById('dataTest').innerHTML = `‚ùå Error loading data: ${error.message}`;
                console.error('Data loading error:', error);
            }
        }
        
        testDataLoading();
    </script>
</body>
</html>