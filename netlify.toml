[build]
  command = ""
  publish = "v3/frontend"

# Route private backend calls to Netlify Functions (internal/private API)
[[redirects]]
  from = "/api/private/*"
  to = "/.netlify/functions/:splat"
  status = 200
  force = true
  headers = { Access-Control-Allow-Origin = "*" }

# Proxy public frontend API calls to Render (public backend)
[[redirects]]
  from = "/api/*"
  to = "https://cratejuice.onrender.com/:splat"
  status = 200
  force = true
  headers = { Access-Control-Allow-Origin = "*" }

# Optional: send 404s to your index.html (SPAs)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
